/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
!function(){function e(e,t,n,r,u,a,o){try{var i=e[a](o),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,u)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(u,a){var o=t.apply(n,r);function i(t){e(o,u,a,i,c,"next",t)}function c(t){e(o,u,a,i,c,"throw",t)}i(void 0)}))}}var n=document.createElement("style");n.innerHTML=".custom-tree-node span+span{margin-left:12px}\n",document.head.appendChild(n),System.register(["../gva/gin-vue-admin-index-legacy.1671085367000.js","./gin-vue-admin-authority-legacy.16710853670002.js","./gin-vue-admin-authorityBtn-legacy.1671085367000.js","./gin-vue-admin-vendor-legacy.1671085367000.js"],(function(e){"use strict";var n,r,u,a,o,i,c,l,s,d,f,m,p,v,h,y,g,w,k;return{setters:[function(e){n=e.h,r=e.i,u=e.j},function(e){a=e.u},function(e){o=e.g,i=e.s},function(e){c=e.r,l=e.i,s=e.o,d=e.j,f=e.q,m=e.k,p=e.t,v=e.C,h=e.O,y=e.A,g=e.v,w=e.d,k=e.R}],execute:function(){var x={class:"clearflex"},I=y("确 定"),R={class:"custom-tree-node"},b={key:0},C=y(" 分配按钮 "),_={class:"dialog-footer"},j=y("取 消"),D=y("确 定"),z={name:"Menus"};e("default",Object.assign(z,{props:{row:{default:function(){return{}},type:Object}},emits:["changeRow"],setup:function(e,z){var N=z.expose,A=z.emit,E=e,B=c([]),O=c([]),S=c(!1),T=c({children:"children",label:function(e){return e.meta.title}});(function(){var e=t(regeneratorRuntime.mark((function e(){var t,u,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return t=e.sent,B.value=t.data.menus,e.next=6,r({authorityId:E.row.authorityId});case 6:u=e.sent,a=u.data.menus,o=[],a.forEach((function(e){a.some((function(t){return t.parentId===e.menuId}))||o.push(Number(e.menuId))})),O.value=o;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var V=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({authorityId:E.row.authorityId,AuthorityName:E.row.authorityName,parentId:E.row.parentId,defaultRouter:t.name});case 2:0===(n=e.sent).code&&(w({type:"success",message:"设置成功"}),A("changeRow","defaultRouter",n.data.authority.defaultRouter));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){S.value=!0},P=c(null),q=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.value.getCheckedNodes(!1,!0),e.next=3,u({menus:t,authorityId:E.row.authorityId});case 3:0===e.sent.code&&w({type:"success",message:"菜单设置成功!"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N({enterAndNext:function(){q()},needConfirm:S});var H=c(!1),L=c([]),U=c([]),F=c(),G="",J=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G=t.ID,e.next=3,o({menuID:G,authorityId:E.row.authorityId});case 3:if(0!==(n=e.sent).code){e.next=9;break}return Q(t),e.next=8,k();case 8:n.data.selected&&n.data.selected.forEach((function(e){L.value.some((function(t){t.ID===e&&F.value.toggleRowSelection(t,!0)}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){U.value=e},Q=function(e){H.value=!0,L.value=e.menuBtn},W=function(){H.value=!1},X=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.value.map((function(e){return e.ID})),e.next=3,i({menuID:G,selected:t,authorityId:E.row.authorityId});case 3:0===e.sent.code&&(w({type:"success",message:"设置成功"}),H.value=!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(t,n){var r=l("el-button"),u=l("el-tree"),a=l("el-table-column"),o=l("el-table"),i=l("el-dialog");return s(),d("div",null,[f("div",x,[m(r,{class:"fl-right",size:"small",type:"primary",onClick:q},{default:p((function(){return[I]})),_:1})]),m(u,{ref_key:"menuTree",ref:P,data:B.value,"default-checked-keys":O.value,props:T.value,"default-expand-all":"","highlight-current":"","node-key":"ID","show-checkbox":"",onCheck:M},{default:p((function(t){var n=t.node,u=t.data;return[f("span",R,[f("span",null,v(n.label),1),f("span",null,[m(r,{type:"text",size:"small",style:h({color:e.row.defaultRouter===u.name?"#E6A23C":"#85ce61"}),disabled:!n.checked,onClick:function(){return V(u)}},{default:p((function(){return[y(v(e.row.defaultRouter===u.name?"首页":"设为首页"),1)]})),_:2},1032,["style","disabled","onClick"])]),u.menuBtn.length?(s(),d("span",b,[m(r,{type:"text",size:"small",onClick:function(){return J(u)}},{default:p((function(){return[C]})),_:2},1032,["onClick"])])):g("",!0)])]})),_:1},8,["data","default-checked-keys","props"]),m(i,{modelValue:H.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return H.value=e}),title:"分配按钮","destroy-on-close":""},{footer:p((function(){return[f("div",_,[m(r,{size:"small",onClick:W},{default:p((function(){return[j]})),_:1}),m(r,{size:"small",type:"primary",onClick:X},{default:p((function(){return[D]})),_:1})])]})),default:p((function(){return[m(o,{ref_key:"btnTableRef",ref:F,data:L.value,"row-key":"ID",onSelectionChange:K},{default:p((function(){return[m(a,{type:"selection",width:"55"}),m(a,{label:"按钮名称",prop:"name"}),m(a,{label:"按钮备注",prop:"desc"})]})),_:1},8,["data"])]})),_:1},8,["modelValue"])])}}}))}}}))}();
