/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,o)=>{var u=e=>{try{i(a.next(e))}catch(l){o(l)}},n=e=>{try{i(a.throw(e))}catch(l){o(l)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,n);i((a=a.apply(e,l)).next())}));import{a as n}from"./gin-vue-admin-minappUser.1671085367000.js";import{c as i}from"./gin-vue-admin-systemMessage.16710853670002.js";import{p as r,r as d,i as s,o as p,j as c,q as v,k as m,t as f,x as g,_ as b,C as h,v as y,A as _,d as V}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";const w={class:"gva-table-box"},x=_("指定用户发送"),k=_("全部发送"),z={key:0},C=_("选择会员"),j={style:{color:"blue","margin-left":"5px"}},U=_("确认发送"),O={class:"gva-search-box"},S=_("查询"),P=_("重置"),I={class:"gva-btn-list"},D=v("p",null,"确定要删除吗？",-1),q={style:{"text-align":"right","margin-top":"8px"}},A=_("取消"),E=_("确定选择"),M=["src"],T={class:"gva-pagination"},B={setup(e){const _=r({uid:[],contents:"",resource:"1"});d("");const B=d(1),F=d(0),G=d(10),H=d([]),J=d({}),K=d([]),L=()=>{Q.value=!0},N=d(!1),Q=d(!1);d(!1);const R=()=>{Q.value=!1},W=e=>{G.value=e,ae()},X=()=>{J.value={}},Y=()=>{B.value=1,G.value=10,ae()},Z=()=>{Q.value=!1,console.log("测试",K)},$=e=>{B.value=e,ae()},ee=d([]),le=e=>{ee.value=e,console.log("测试",ee.value);const l=[];0!==ee.value.length?(ee.value&&ee.value.map((e=>{let a=e.ID.toString();l.push(a)})),console.log("选中",l),K.value=l,console.log("选中的会员",K)):V({type:"warning",message:"请选数据"})},ae=()=>u(this,null,(function*(){const e=yield n(((e,u)=>{for(var n in u||(u={}))a.call(u,n)&&o(e,n,u[n]);if(l)for(var n of l(u))t.call(u,n)&&o(e,n,u[n]);return e})({page:B.value,pageSize:G.value},J.value));0===e.code&&(H.value=e.data.list,F.value=e.data.total,B.value=e.data.page,G.value=e.data.pageSize)})),te=()=>u(this,null,(function*(){if(""==_.contents)return void V.error("请填写消息内容");if(1==_.resource&&(_.uid=K.value,_.uid.length<1))return void V.error("请选择会员");let e;console.log(_),e=yield i(_),0===e.code&&V({type:"success",message:"发送成功"})}));return(e,l)=>{const a=s("el-input"),t=s("el-form-item"),o=s("el-radio"),u=s("el-radio-group"),n=s("el-button"),i=s("el-form"),r=s("el-popover"),d=s("el-table-column"),V=s("el-table"),ae=s("el-pagination"),oe=s("el-dialog");return p(),c("div",null,[v("div",w,[m(i,{model:g(_),"label-width":"120px"},{default:f((()=>[m(t,{label:"消息内容"},{default:f((()=>[m(a,{modelValue:g(_).contents,"onUpdate:modelValue":l[0]||(l[0]=e=>g(_).contents=e),type:"textarea"},null,8,["modelValue"])])),_:1}),m(t,{label:"选择用户"},{default:f((()=>[m(u,{modelValue:g(_).resource,"onUpdate:modelValue":l[1]||(l[1]=e=>g(_).resource=e)},{default:f((()=>[m(o,{label:"1"},{default:f((()=>[x])),_:1}),m(o,{label:"2"},{default:f((()=>[k])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==g(_).resource?(p(),c("div",z,[m(t,{label:"关联会员:"},{default:f((()=>[m(n,{type:"primary",icon:g(b),onClick:L},{default:f((()=>[C])),_:1},8,["icon"]),v("span",j," 已选中 "+h(K.value.length)+" 人",1)])),_:1})])):y("",!0),m(t,null,{default:f((()=>[m(n,{type:"primary",onClick:te},{default:f((()=>[U])),_:1})])),_:1})])),_:1},8,["model"])]),m(oe,{modelValue:Q.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Q.value=e),"before-close":R,title:"选择用户"},{default:f((()=>[v("div",O,[m(i,{inline:!0,model:J.value,class:"demo-form-inline"},{default:f((()=>[m(t,{label:"昵称"},{default:f((()=>[m(a,{modelValue:J.value.nickname,"onUpdate:modelValue":l[2]||(l[2]=e=>J.value.nickname=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),m(t,{label:"手机号"},{default:f((()=>[m(a,{modelValue:J.value.phone,"onUpdate:modelValue":l[3]||(l[3]=e=>J.value.phone=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),m(t,{label:"编号"},{default:f((()=>[m(a,{modelValue:J.value.uid,"onUpdate:modelValue":l[4]||(l[4]=e=>J.value.uid=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),m(t,null,{default:f((()=>[m(n,{size:"small",type:"primary",icon:"search",onClick:Y},{default:f((()=>[S])),_:1}),m(n,{size:"small",icon:"refresh",onClick:X},{default:f((()=>[P])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",I,[m(r,{visible:N.value,"onUpdate:visible":l[6]||(l[6]=e=>N.value=e),placement:"top",width:"160"},{reference:f((()=>[m(n,{size:"small",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:Z},{default:f((()=>[E])),_:1},8,["disabled"])])),default:f((()=>[D,v("div",q,[m(n,{size:"small",type:"text",onClick:l[5]||(l[5]=e=>N.value=!1)},{default:f((()=>[A])),_:1})])])),_:1},8,["visible"])]),m(V,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:H.value,onSelectionChange:le,"row-key":"ID"},{default:f((()=>[m(d,{type:"selection",width:"55"}),m(d,{align:"left",label:"头像"},{default:f((e=>[v("img",{src:e.row.avatar,width:"60"},null,8,M)])),_:1}),m(d,{align:"left",label:"昵称",prop:"nickname",width:"120"}),m(d,{align:"left",label:"手机号",prop:"phone",width:"120"}),m(d,{align:"left",label:"地区",prop:"area_id",width:"120"}),m(d,{align:"left",label:"证件号",prop:"number",width:"120"})])),_:1},8,["data"]),v("div",T,[m(ae,{layout:"total, sizes, prev, pager, next, jumper","current-page":B.value,"page-size":G.value,"page-sizes":[10,30,50,100],total:F.value,onCurrentChange:$,onSizeChange:W},null,8,["current-page","page-size","total"])])])),_:1},8,["modelValue"])])}}};export{B as default};
