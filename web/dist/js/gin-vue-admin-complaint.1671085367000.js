/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l,a)=>new Promise(((t,o)=>{var n=e=>{try{u(a.next(e))}catch(l){o(l)}},i=e=>{try{u(a.throw(e))}catch(l){o(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,i);u((a=a.apply(e,l)).next())}));import{g as i,f as u,d as r,c as d,u as s}from"./gin-vue-admin-complaint.16710853670002.js";import{f as p}from"./gin-vue-admin-format.1671085367000.js";import{r as c,u as m,i as v,o as f,j as g,q as y,k as b,t as h,A as w,C,x as _,e as k,d as x}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const I={class:"gva-search-box"},j=w("查询"),z=w("重置"),V={class:"gva-table-box"},D=w("回复信息"),O=w("删除"),U={class:"gva-pagination"},N={class:"dialog-footer"},P=w("取 消"),S=w("确 定"),B={name:"Complaint"},T=Object.assign(B,{setup(e){const B=c({label:"",orderNum:"",contents:"",complainantId:0,byComplainantId:0,reply:"",status:0}),T=c(1),A=c(0),q=c(10),E=c([]),F=c({}),G=m(),H=()=>{F.value={}},J=()=>{T.value=1,q.value=10,M()},K=e=>{q.value=e,M()},L=e=>{T.value=e,M()},M=()=>n(this,null,(function*(){const e=yield i(((e,n)=>{for(var i in n||(n={}))a.call(n,i)&&o(e,i,n[i]);if(l)for(var i of l(n))t.call(n,i)&&o(e,i,n[i]);return e})({page:T.value,pageSize:q.value},F.value));0===e.code&&(E.value=e.data.list,A.value=e.data.total,T.value=e.data.page,q.value=e.data.pageSize)}));M();(()=>{n(this,null,(function*(){}))})();const Q=e=>{console.log("数据",e),G.push({name:"userDetail",params:{id:e}})},R=c([]),W=e=>{R.value=e};c(!1);const X=c(""),Y=e=>n(this,null,(function*(){const l=yield u({ID:e.ID});X.value="update",0===l.code&&(B.value=l.data.recomplaint,$.value=!0)})),Z=e=>n(this,null,(function*(){0===(yield r({ID:e.ID})).code&&(x({type:"success",message:"删除成功"}),1===E.value.length&&T.value>1&&T.value--,M())})),$=c(!1),ee=()=>{$.value=!1,B.value={label:"",orderNum:"",contents:"",complainantId:0,byComplainantId:0,reply:"",status:0}},le=()=>n(this,null,(function*(){let e;switch(X.value){case"create":e=yield d(B.value);break;case"update":e=yield s(B.value);break;default:e=yield d(B.value)}0===e.code&&(x({type:"success",message:"创建/更改成功"}),ee(),M())}));return(e,l)=>{const a=v("el-input"),t=v("el-form-item"),o=v("el-button"),n=v("el-form"),i=v("el-table-column"),u=v("el-table"),r=v("el-pagination"),d=v("el-dialog");return f(),g("div",null,[y("div",I,[b(n,{inline:!0,model:F.value,class:"demo-form-inline"},{default:h((()=>[b(t,{label:"投诉标签"},{default:h((()=>[b(a,{modelValue:F.value.label,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value.label=e),placeholder:"标签内容"},null,8,["modelValue"])])),_:1}),b(t,{label:"相应订单"},{default:h((()=>[b(a,{modelValue:F.value.orderNum,"onUpdate:modelValue":l[1]||(l[1]=e=>F.value.orderNum=e),placeholder:"订单号"},null,8,["modelValue"])])),_:1}),b(t,null,{default:h((()=>[b(o,{size:"small",type:"primary",icon:"search",onClick:J},{default:h((()=>[j])),_:1}),b(o,{size:"small",icon:"refresh",onClick:H},{default:h((()=>[z])),_:1})])),_:1})])),_:1},8,["model"])]),y("div",V,[b(u,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:E.value,"row-key":"ID",onSelectionChange:W},{default:h((()=>[b(i,{align:"left",label:"日期",width:"180"},{default:h((e=>[w(C(_(p)(e.row.CreatedAt)),1)])),_:1}),b(i,{align:"left",label:"投诉标签",prop:"label",width:"120"}),b(i,{align:"left",label:"相应订单",prop:"orderNum",width:"120"}),b(i,{align:"left",label:"投诉内容",prop:"contents",width:"120"}),b(i,{align:"left",label:"投诉人",prop:"complainantId",width:"120"},{default:h((e=>[b(o,{type:"text",onClick:l=>Q(e.row.complainantId)},{default:h((()=>[w(C(e.row.ComplainantUserInfo.nickname),1)])),_:2},1032,["onClick"])])),_:1}),b(i,{align:"left",label:"被投诉人",prop:"byComplainantId",width:"120"},{default:h((e=>[b(o,{type:"text",onClick:l=>Q(e.row.byComplainantId)},{default:h((()=>[w(C(e.row.ByComplainantUserInfo.nickname),1)])),_:2},1032,["onClick"])])),_:1}),b(i,{align:"left",label:"回复信息",prop:"reply",width:"120"}),b(i,{align:"left",label:"按钮组"},{default:h((e=>[b(o,{type:"text",icon:"edit",size:"small",class:"table-button",onClick:l=>Y(e.row)},{default:h((()=>[D])),_:2},1032,["onClick"]),b(o,{type:"text",icon:"delete",size:"small",onClick:l=>{return a=e.row,void k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Z(a)}));var a}},{default:h((()=>[O])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),y("div",U,[b(r,{layout:"total, sizes, prev, pager, next, jumper","current-page":T.value,"page-size":q.value,"page-sizes":[10,30,50,100],total:A.value,onCurrentChange:L,onSizeChange:K},null,8,["current-page","page-size","total"])])]),b(d,{modelValue:$.value,"onUpdate:modelValue":l[3]||(l[3]=e=>$.value=e),"before-close":ee,title:"弹窗操作"},{footer:h((()=>[y("div",N,[b(o,{size:"small",onClick:ee},{default:h((()=>[P])),_:1}),b(o,{size:"small",type:"primary",onClick:le},{default:h((()=>[S])),_:1})])])),default:h((()=>[b(n,{model:B.value,"label-position":"right","label-width":"80px"},{default:h((()=>[b(t,{label:"回复内容:"},{default:h((()=>[b(a,{modelValue:B.value.reply,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value.reply=e),rows:2,type:"textarea",placeholder:"请输入回复的内容"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{T as default};
