/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
import{s as a}from"./gin-vue-admin-authority.16710853670002.js";import{w as e}from"./gin-vue-admin-warningBar.1671085367000.js";import{r as t,i as l,o as r,j as u,q as o,k as i,t as n,J as s,L as d,A as h,d as c,H as y,C as m}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";const v={class:"clearflex",style:{margin:"18px"}},f=h("确 定"),p=h("全选"),g=h("本角色"),I=h("本角色及子角色"),w={name:"Datas"},x=Object.assign(w,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(w,{expose:x,emit:A}){const k=w,b=t([]),j=t(!1),C=a=>{a&&a.forEach((a=>{const e={};e.authorityId=a.authorityId,e.authorityName=a.authorityName,b.value.push(e),a.children&&a.children.length&&C(a.children)}))},_=t([]);C(k.authority),k.row.dataAuthorityId&&k.row.dataAuthorityId.forEach((a=>{const e=b.value&&b.value.filter((e=>e.authorityId===a.authorityId))&&b.value.filter((e=>e.authorityId===a.authorityId))[0];_.value.push(e)}));const R=()=>{_.value=[...b.value],A("changeRow","dataAuthorityId",_.value),j.value=!0},z=()=>{_.value=b.value.filter((a=>a.authorityId===k.row.authorityId)),A("changeRow","dataAuthorityId",_.value),j.value=!0},N=()=>{const a=[];E(k.row,a),_.value=b.value.filter((e=>a.indexOf(e.authorityId)>-1)),A("changeRow","dataAuthorityId",_.value),j.value=!0},E=(a,e)=>{e.push(a.authorityId),a.children&&a.children.forEach((a=>{E(a,e)}))},O=()=>{return e=this,t=null,l=function*(){0===(yield a(k.row)).code&&c({type:"success",message:"资源设置成功"})},new Promise(((a,r)=>{var u=a=>{try{i(l.next(a))}catch(e){r(e)}},o=a=>{try{i(l.throw(a))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(u,o);i((l=l.apply(e,t)).next())}));var e,t,l},V=()=>{A("changeRow","dataAuthorityId",_.value),j.value=!0};return x({enterAndNext:()=>{O()},needConfirm:j}),(a,t)=>{const c=l("el-button"),w=l("el-checkbox"),x=l("el-checkbox-group");return r(),u("div",null,[o("div",v,[i(c,{class:"fl-right",size:"small",type:"primary",onClick:O},{default:n((()=>[f])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:R},{default:n((()=>[p])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:z},{default:n((()=>[g])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:N},{default:n((()=>[I])),_:1})]),i(x,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a),onChange:V},{default:n((()=>[(r(!0),u(s,null,d(b.value,((a,e)=>(r(),y(w,{key:e,label:a},{default:n((()=>[h(m(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),i(e,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）"})])}}});export{x as default};
