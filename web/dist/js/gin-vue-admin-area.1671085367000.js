/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,a,l)=>new Promise(((t,i)=>{var o=e=>{try{u(l.next(e))}catch(a){i(a)}},n=e=>{try{u(l.throw(e))}catch(a){i(a)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);u((l=l.apply(e,a)).next())}));import{g as n,f as u,d as s,c as r,u as d}from"./gin-vue-admin-area.16710853670002.js";import{f as c}from"./gin-vue-admin-format.1671085367000.js";import{r as v,i as p,o as m,j as f,q as g,k as y,t as h,A as b,C as w,x as j,e as C,d as k}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const x={class:"gva-table-box"},z={class:"gva-btn-list"},_=b("新增"),D=b("添加子菜单"),I=b("编辑"),O=b("删除"),V={class:"gva-pagination"},P={class:"dialog-footer"},S=b("取 消"),A=b("确 定"),E={name:"Area"},B=Object.assign(E,{setup(e){const E=v({title:"",pid:"0"}),B=v(1),T=v(0),U=v(10),q=v([]),F=v({}),G=v("新增菜单"),H=v(!1),J=e=>{U.value=e,L()},K=e=>{B.value=e,L()},L=()=>o(this,null,(function*(){const e=yield n(((e,o)=>{for(var n in o||(o={}))l.call(o,n)&&i(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&i(e,n,o[n]);return e})({page:B.value,pageSize:U.value},F.value));console.log(W(e.data.list)),0===e.code&&(q.value=W(e.data.list),T.value=e.data.total,B.value=e.data.page,U.value=e.data.pageSize)}));L();const M=()=>o(this,null,(function*(){}));M(),v([]);const N=v(""),Q=e=>o(this,null,(function*(){console.log("id",e),G.value="编辑菜单";const a=yield u({ID:e});N.value="update",0===a.code&&(E.value=a.data.rearea,H.value=!0,X.value=!0)})),R=e=>{C.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>o(this,null,(function*(){0===(yield s({ID:e})).code&&(k({type:"success",message:"删除成功!"}),1===q.value.length&&B.value>1&&B.value--,L())})))).catch((()=>{k({type:"info",message:"已取消删除"})}))},W=e=>{var a=[],l=[],t={};return e.forEach((function(e){0==e.pid?a.push(e):l.push(e),e.children=[],t[e.ID]=e})),l.forEach((function(e){(t[e.pid]||{children:[]}).children.push(e)})),a},X=v(!1),Y=()=>{N.value="create",X.value=!0},Z=()=>{X.value=!1,E.value={title:"",pid:"0"}},$=()=>o(this,null,(function*(){let e;switch(N.value){case"create":e=yield r(E.value);break;case"update":e=yield d(E.value);break;default:e=yield r(E.value)}0===e.code&&(k({type:"success",message:"创建/更改成功"}),Z(),L())}));return(e,a)=>{const l=p("el-button"),t=p("el-table-column"),i=p("el-table"),o=p("el-pagination"),n=p("el-input"),u=p("el-form-item"),s=p("el-form"),r=p("el-dialog");return m(),f("div",null,[g("div",x,[g("div",z,[y(l,{size:"small",type:"primary",icon:"plus",onClick:Y},{default:h((()=>[_])),_:1})]),y(i,{data:q.value,"row-key":"ID"},{default:h((()=>[y(t,{align:"left",label:"ID",width:"100",prop:"ID"}),y(t,{align:"left",label:"日期",width:"180"},{default:h((e=>[b(w(j(c)(e.row.CreatedAt)),1)])),_:1}),y(t,{align:"left",label:"名称",prop:"title",width:"120"}),y(t,{align:"left",label:"按钮组"},{default:h((e=>[y(l,{size:"small",type:"text",icon:"plus",onClick:a=>{return l=e.row.ID,G.value="新增菜单",E.value.pid=String(l),console.log(E.value),H.value=!1,M(),void(X.value=!0);var l}},{default:h((()=>[D])),_:2},1032,["onClick"]),y(l,{size:"small",type:"text",icon:"edit",onClick:a=>Q(e.row.ID)},{default:h((()=>[I])),_:2},1032,["onClick"]),y(l,{size:"small",type:"text",icon:"delete",onClick:a=>R(e.row.ID)},{default:h((()=>[O])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),g("div",V,[y(o,{layout:"total, sizes, prev, pager, next, jumper","current-page":B.value,"page-size":U.value,"page-sizes":[10,30,50,100],total:T.value,onCurrentChange:K,onSizeChange:J},null,8,["current-page","page-size","total"])])]),y(r,{modelValue:X.value,"onUpdate:modelValue":a[1]||(a[1]=e=>X.value=e),"before-close":Z,title:G.value},{footer:h((()=>[g("div",P,[y(l,{size:"small",onClick:Z},{default:h((()=>[S])),_:1}),y(l,{size:"small",type:"primary",onClick:$},{default:h((()=>[A])),_:1})])])),default:h((()=>[y(s,{model:E.value,"label-position":"right","label-width":"80px"},{default:h((()=>[y(u,{label:"名称:"},{default:h((()=>[y(n,{modelValue:E.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.title=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}});export{B as default};
