/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=(e,a,t)=>new Promise(((l,i)=>{var n=e=>{try{o(t.next(e))}catch(a){i(a)}},s=e=>{try{o(t.throw(e))}catch(a){i(a)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,a)).next())}));import{e as a,f as t,r as l}from"./gin-vue-admin-autoCode.1671085367000.js";import{u as i,r as n,i as s,o,j as u,q as d,k as r,t as c,A as p,C as m,x as f,H as g,e as v,d as h}from"./gin-vue-admin-vendor.1671085367000.js";import{f as y}from"./gin-vue-admin-format.1671085367000.js";import{_ as b}from"../gva/gin-vue-admin-index.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const w={class:"gva-table-box"},C={class:"gva-btn-list"},x=p("新增"),z=p(" 已回滚 "),_=p(" 未回滚 "),k=p("回滚"),j=p("复用"),N=p("删除"),D={class:"gva-pagination"},I={name:"AutoCodeAdmin"};var A=b(Object.assign(I,{setup(b){const I=i(),A=n(1),B=n(0),T=n(10),S=n([]),P=e=>{T.value=e,E()},q=e=>{A.value=e,E()},E=()=>e(this,null,(function*(){const e=yield a({page:A.value,pageSize:T.value});0===e.code&&(S.value=e.data.list,B.value=e.data.total,A.value=e.data.page,T.value=e.data.pageSize)}));E();const H=a=>e(this,null,(function*(){v.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield t({id:Number(a.ID)})).code&&(h.success("删除成功"),E())}))))})),O=a=>e(this,null,(function*(){v.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield l({id:Number(a.ID)})).code&&(h.success("回滚成功"),E())}))))})),F=e=>{e?I.push({name:"autoCodeEdit",params:{id:e.ID}}):I.push({name:"autoCode"})};return(e,a)=>{const t=s("el-button"),l=s("el-table-column"),i=s("el-tag"),n=s("el-table"),v=s("el-pagination");return o(),u("div",null,[d("div",w,[d("div",C,[r(t,{size:"small",type:"primary",icon:"plus",onClick:a[0]||(a[0]=e=>F(null))},{default:c((()=>[x])),_:1})]),r(n,{data:S.value},{default:c((()=>[r(l,{type:"selection",width:"55"}),r(l,{align:"left",label:"id",width:"60",prop:"ID"}),r(l,{align:"left",label:"日期",width:"180"},{default:c((e=>[p(m(f(y)(e.row.CreatedAt)),1)])),_:1}),r(l,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),r(l,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),r(l,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),r(l,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:c((e=>[e.row.flag?(o(),g(i,{key:0,type:"danger",size:"small",effect:"dark"},{default:c((()=>[z])),_:1})):(o(),g(i,{key:1,size:"small",type:"success",effect:"dark"},{default:c((()=>[_])),_:1}))])),_:1}),r(l,{align:"left",label:"操作","min-width":"180"},{default:c((e=>[d("div",null,[r(t,{size:"small",type:"text",disabled:1===e.row.flag,onClick:a=>O(e.row)},{default:c((()=>[k])),_:2},1032,["disabled","onClick"]),r(t,{size:"small",type:"text",onClick:a=>F(e.row)},{default:c((()=>[j])),_:2},1032,["onClick"]),r(t,{size:"small",type:"text",onClick:a=>H(e.row)},{default:c((()=>[N])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),d("div",D,[r(v,{"current-page":A.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:q,onSizeChange:P},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-109ab87e"]]);export{A as default};
