/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,l,a)=>new Promise(((t,i)=>{var r=e=>{try{n(a.next(e))}catch(l){i(l)}},o=e=>{try{n(a.throw(e))}catch(l){i(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,o);n((a=a.apply(e,l)).next())}));import{s as o}from"../gva/gin-vue-admin-index.1671085367000.js";import{f as n}from"./gin-vue-admin-format.1671085367000.js";import{r as s,i as u,o as d,j as p,q as c,k as v,t as m,C as f,A as g,x as b,H as y,d as h}from"./gin-vue-admin-vendor.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const w={class:"gva-search-box"},_=g("查询"),k=g("重置"),j={class:"gva-table-box"},x={class:"popover-box"},C={key:1},O={class:"popover-box"},z={key:1},S=c("p",null,"确定要删除吗？",-1),V={style:{"text-align":"right","margin-top":"8px"}},P=g("取消"),I=g("确定"),R=g("删除"),U={class:"gva-pagination"},D={name:"SysOperationRecord"},N=Object.assign(D,{setup(e){const D=s(1),N=s(0),A=s(10),q=s([]),E=s({}),H=()=>{E.value={}},J=()=>{D.value=1,A.value=10,""===E.value.status&&(E.value.status=null),B()},L=e=>{A.value=e,B()},T=e=>{D.value=e,B()},B=()=>r(this,null,(function*(){const e=yield(r=((e,r)=>{for(var o in r||(r={}))a.call(r,o)&&i(e,o,r[o]);if(l)for(var o of l(r))t.call(r,o)&&i(e,o,r[o]);return e})({page:D.value,pageSize:A.value},E.value),o({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:r}));var r;0===e.code&&(q.value=e.data.list,N.value=e.data.total,D.value=e.data.page,A.value=e.data.pageSize)}));B(),s(!1);const F=s([]),G=e=>{F.value=e},K=e=>r(this,null,(function*(){e.visible=!1;var l;0===(yield(l={ID:e.ID},o({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(h({type:"success",message:"删除成功"}),1===q.value.length&&D.value>1&&D.value--,B())})),M=e=>{try{return JSON.parse(e)}catch(l){return e}};return(e,l)=>{const a=u("el-input"),t=u("el-form-item"),i=u("el-button"),r=u("el-form"),o=u("el-table-column"),s=u("el-tag"),h=u("warning"),B=u("el-icon"),F=u("el-popover"),Q=u("el-table"),W=u("el-pagination");return d(),p("div",null,[c("div",w,[v(r,{inline:!0,model:E.value},{default:m((()=>[v(t,{label:"请求方法"},{default:m((()=>[v(a,{modelValue:E.value.method,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),v(t,{label:"请求路径"},{default:m((()=>[v(a,{modelValue:E.value.path,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),v(t,{label:"结果状态码"},{default:m((()=>[v(a,{modelValue:E.value.status,"onUpdate:modelValue":l[2]||(l[2]=e=>E.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),v(t,null,{default:m((()=>[v(i,{size:"small",type:"primary",icon:"search",onClick:J},{default:m((()=>[_])),_:1}),v(i,{size:"small",icon:"refresh",onClick:H},{default:m((()=>[k])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",j,[v(Q,{ref:"multipleTable",data:q.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:G},{default:m((()=>[v(o,{align:"left",label:"操作人",width:"140"},{default:m((e=>[c("div",null,f(e.row.user.userName)+"("+f(e.row.user.nickName)+")",1)])),_:1}),v(o,{align:"left",label:"日期",width:"180"},{default:m((e=>[g(f(b(n)(e.row.CreatedAt)),1)])),_:1}),v(o,{align:"left",label:"状态码",prop:"status",width:"120"},{default:m((e=>[c("div",null,[v(s,{type:"success"},{default:m((()=>[g(f(e.row.status),1)])),_:2},1024)])])),_:1}),v(o,{align:"left",label:"请求IP",prop:"ip",width:"120"}),v(o,{align:"left",label:"请求方法",prop:"method",width:"120"}),v(o,{align:"left",label:"请求路径",prop:"path",width:"240"}),v(o,{align:"left",label:"请求",prop:"path",width:"80"},{default:m((e=>[c("div",null,[e.row.body?(d(),y(F,{key:0,placement:"left-start",trigger:"click"},{reference:m((()=>[v(B,{style:{cursor:"pointer"}},{default:m((()=>[v(h)])),_:1})])),default:m((()=>[c("div",x,[c("pre",null,f(M(e.row.body)),1)])])),_:2},1024)):(d(),p("span",C,"无"))])])),_:1}),v(o,{align:"left",label:"响应",prop:"path",width:"80"},{default:m((e=>[c("div",null,[e.row.resp?(d(),y(F,{key:0,placement:"left-start",trigger:"click"},{reference:m((()=>[v(B,{style:{cursor:"pointer"}},{default:m((()=>[v(h)])),_:1})])),default:m((()=>[c("div",O,[c("pre",null,f(M(e.row.resp)),1)])])),_:2},1024)):(d(),p("span",z,"无"))])])),_:1}),v(o,{align:"left",label:"按钮组"},{default:m((e=>[v(F,{visible:e.row.visible,"onUpdate:visible":l=>e.row.visible=l,placement:"top",width:"160"},{reference:m((()=>[v(i,{icon:"delete",size:"small",type:"text",onClick:l=>e.row.visible=!0},{default:m((()=>[R])),_:2},1032,["onClick"])])),default:m((()=>[S,c("div",V,[v(i,{size:"small",type:"text",onClick:l=>e.row.visible=!1},{default:m((()=>[P])),_:2},1032,["onClick"]),v(i,{size:"small",type:"primary",onClick:l=>K(e.row)},{default:m((()=>[I])),_:2},1032,["onClick"])])])),_:2},1032,["visible","onUpdate:visible"])])),_:1})])),_:1},8,["data"]),c("div",U,[v(W,{"current-page":D.value,"page-size":A.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:T,onSizeChange:L},null,8,["current-page","page-size","total"])])])])}}});export{N as default};
