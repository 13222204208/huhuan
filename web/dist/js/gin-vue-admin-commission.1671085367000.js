/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l,a)=>new Promise(((t,i)=>{var o=e=>{try{u(a.next(e))}catch(l){i(l)}},n=e=>{try{u(a.throw(e))}catch(l){i(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);u((a=a.apply(e,l)).next())}));import{g as n,d as u,f as s,a as d,c as r,u as m}from"./gin-vue-admin-commission.16710853670002.js";import{f as c,a as v,g as p}from"./gin-vue-admin-format.1671085367000.js";import{r as f,i as g,o as y,j as b,q as h,k as _,t as w,A as C,C as k,x,J as z,L as j,e as V,d as D,H as I}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const O={class:"gva-search-box"},U=C("查询"),P=C("重置"),S={class:"gva-table-box"},T={class:"gva-btn-list"},A=C("新增"),B=h("p",null,"确定要删除吗？",-1),M={style:{"text-align":"right","margin-top":"8px"}},q=C("取消"),E=C("确定"),H=C("删除"),J=C("变更"),L=C("删除"),F={class:"gva-pagination"},G={class:"dialog-footer"},K=C("取 消"),N=C("确 定"),Q={name:"Commission"},R=Object.assign(Q,{setup(e){const Q=f([]),R=f({title:"",money:0,genre:void 0,commission:0}),W=f(1),X=f(0),Y=f(10),Z=f([]),$=f({}),ee=()=>{$.value={}},le=()=>{W.value=1,Y.value=10,ie()},ae=e=>{Y.value=e,ie()},te=e=>{W.value=e,ie()},ie=()=>o(this,null,(function*(){const e=yield n(((e,o)=>{for(var n in o||(o={}))a.call(o,n)&&i(e,n,o[n]);if(l)for(var n of l(o))t.call(o,n)&&i(e,n,o[n]);return e})({page:W.value,pageSize:Y.value},$.value));0===e.code&&(Z.value=e.data.list,X.value=e.data.total,W.value=e.data.page,Y.value=e.data.pageSize)}));ie();(()=>{o(this,null,(function*(){Q.value=yield p("genre")}))})();const oe=f([]),ne=e=>{oe.value=e},ue=f(!1),se=()=>o(this,null,(function*(){const e=[];if(0===oe.value.length)return void D({type:"warning",message:"请选择要删除的数据"});oe.value&&oe.value.map((l=>{e.push(l.ID)}));0===(yield u({ids:e})).code&&(D({type:"success",message:"删除成功"}),Z.value.length===e.length&&W.value>1&&W.value--,ue.value=!1,ie())})),de=f(""),re=e=>o(this,null,(function*(){const l=yield s({ID:e.ID});de.value="update",0===l.code&&(R.value=l.data.recommission,ce.value=!0)})),me=e=>o(this,null,(function*(){0===(yield d({ID:e.ID})).code&&(D({type:"success",message:"删除成功"}),1===Z.value.length&&W.value>1&&W.value--,ie())})),ce=f(!1),ve=()=>{de.value="create",ce.value=!0},pe=()=>{ce.value=!1,R.value={title:"",money:0,genre:void 0,commission:0}},fe=()=>o(this,null,(function*(){let e;switch(de.value){case"create":e=yield r(R.value);break;case"update":e=yield m(R.value);break;default:e=yield r(R.value)}0===e.code&&(D({type:"success",message:"创建/更改成功"}),pe(),ie())}));return(e,l)=>{const a=g("el-button"),t=g("el-form-item"),i=g("el-form"),o=g("el-popover"),n=g("el-table-column"),u=g("el-table"),s=g("el-pagination"),d=g("el-input"),r=g("el-option"),m=g("el-select"),p=g("el-dialog");return y(),b("div",null,[h("div",O,[_(i,{inline:!0,model:$.value,class:"demo-form-inline"},{default:w((()=>[_(t,null,{default:w((()=>[_(a,{size:"small",type:"primary",icon:"search",onClick:le},{default:w((()=>[U])),_:1}),_(a,{size:"small",icon:"refresh",onClick:ee},{default:w((()=>[P])),_:1})])),_:1})])),_:1},8,["model"])]),h("div",S,[h("div",T,[_(a,{size:"small",type:"primary",icon:"plus",onClick:ve},{default:w((()=>[A])),_:1}),_(o,{visible:ue.value,"onUpdate:visible":l[1]||(l[1]=e=>ue.value=e),placement:"top",width:"160"},{reference:w((()=>[_(a,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!oe.value.length},{default:w((()=>[H])),_:1},8,["disabled"])])),default:w((()=>[B,h("div",M,[_(a,{size:"small",type:"text",onClick:l[0]||(l[0]=e=>ue.value=!1)},{default:w((()=>[q])),_:1}),_(a,{size:"small",type:"primary",onClick:se},{default:w((()=>[E])),_:1})])])),_:1},8,["visible"])]),_(u,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Z.value,"row-key":"ID",onSelectionChange:ne},{default:w((()=>[_(n,{type:"selection",width:"55"}),_(n,{align:"left",label:"日期",width:"180"},{default:w((e=>[C(k(x(c)(e.row.CreatedAt)),1)])),_:1}),_(n,{align:"left",label:"名称",prop:"title",width:"120"}),_(n,{align:"left",label:"小于",prop:"money",width:"120"}),_(n,{align:"left",label:"类型",prop:"genre",width:"120"},{default:w((e=>[C(k(x(v)(e.row.genre,Q.value)),1)])),_:1}),_(n,{align:"left",label:"佣金",prop:"commission",width:"120"}),_(n,{align:"left",label:"按钮组"},{default:w((e=>[_(a,{type:"text",icon:"edit",size:"small",class:"table-button",onClick:l=>re(e.row)},{default:w((()=>[J])),_:2},1032,["onClick"]),_(a,{type:"text",icon:"delete",size:"small",onClick:l=>{return a=e.row,void V.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{me(a)}));var a}},{default:w((()=>[L])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),h("div",F,[_(s,{layout:"total, sizes, prev, pager, next, jumper","current-page":W.value,"page-size":Y.value,"page-sizes":[10,30,50,100],total:X.value,onCurrentChange:te,onSizeChange:ae},null,8,["current-page","page-size","total"])])]),_(p,{modelValue:ce.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ce.value=e),"before-close":pe,title:"弹窗操作"},{footer:w((()=>[h("div",G,[_(a,{size:"small",onClick:pe},{default:w((()=>[K])),_:1}),_(a,{size:"small",type:"primary",onClick:fe},{default:w((()=>[N])),_:1})])])),default:w((()=>[_(i,{model:R.value,"label-position":"right","label-width":"80px"},{default:w((()=>[_(t,{label:"名称:"},{default:w((()=>[_(d,{modelValue:R.value.title,"onUpdate:modelValue":l[2]||(l[2]=e=>R.value.title=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),_(t,{label:"小于:"},{default:w((()=>[_(d,{modelValue:R.value.money,"onUpdate:modelValue":l[3]||(l[3]=e=>R.value.money=e),modelModifiers:{number:!0},clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),_(t,{label:"类型:"},{default:w((()=>[_(m,{modelValue:R.value.genre,"onUpdate:modelValue":l[4]||(l[4]=e=>R.value.genre=e),placeholder:"请选择",style:{width:"100%"},clearable:""},{default:w((()=>[(y(!0),b(z,null,j(Q.value,((e,l)=>(y(),I(r,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(t,{label:"佣金:"},{default:w((()=>[_(d,{modelValue:R.value.commission,"onUpdate:modelValue":l[5]||(l[5]=e=>R.value.commission=e),modelModifiers:{number:!0},clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{R as default};
