/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,a,l)=>new Promise(((t,i)=>{var o=e=>{try{u(l.next(e))}catch(a){i(a)}},n=e=>{try{u(l.throw(e))}catch(a){i(a)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);u((l=l.apply(e,a)).next())}));import{g as n,f as u,d as s,c as r,u as d}from"./gin-vue-admin-category.16710853670002.js";import{f as c}from"./gin-vue-admin-format.1671085367000.js";import{r as p,i as v,o as m,j as g,q as f,k as y,t as h,A as b,C as j,x as w,e as C,d as x}from"./gin-vue-admin-vendor.1671085367000.js";import"../gva/gin-vue-admin-index.1671085367000.js";import"./gin-vue-admin-date.1671085367000.js";import"./gin-vue-admin-dictionary.1671085367000.js";import"./gin-vue-admin-dictionary.16710853670002.js";import"./gin-vue-admin-sysDictionary.1671085367000.js";const z={class:"gva-table-box"},k={class:"gva-btn-list"},_=b("新增"),D=b("编辑"),I=b("删除"),O={class:"gva-pagination"},V={class:"dialog-footer"},P=b("取 消"),S=b("确 定"),E={name:"Category"},A=Object.assign(E,{setup(e){const E=p({title:"",pid:"0"}),A=p(1),B=p(0),T=p(9999),U=p([]),q=p({}),F=p("新增菜单"),G=p(!1),H=e=>{T.value=e,K()},J=e=>{A.value=e,K()},K=()=>o(this,null,(function*(){const e=yield n(((e,o)=>{for(var n in o||(o={}))l.call(o,n)&&i(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&i(e,n,o[n]);return e})({page:A.value,pageSize:T.value},q.value));console.log(Q(e.data.list)),0===e.code&&(U.value=Q(e.data.list),B.value=e.data.total,A.value=e.data.page,T.value=e.data.pageSize)}));K();(()=>{o(this,null,(function*(){}))})(),p([]);const L=p(""),M=e=>o(this,null,(function*(){console.log("id",e),F.value="编辑菜单";const a=yield u({ID:e});L.value="update",0===a.code&&(E.value=a.data.recategory,G.value=!0,R.value=!0)})),N=e=>{C.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>o(this,null,(function*(){0===(yield s({ID:e})).code&&(x({type:"success",message:"删除成功!"}),1===U.value.length&&A.value>1&&A.value--,K())})))).catch((()=>{x({type:"info",message:"已取消删除"})}))},Q=e=>{var a=[],l=[],t={};return e.forEach((function(e){0==e.pid?a.push(e):l.push(e),e.children=[],t[e.ID]=e})),l.forEach((function(e){(t[e.pid]||{children:[]}).children.push(e)})),a},R=p(!1),W=()=>{L.value="create",R.value=!0},X=()=>{R.value=!1,E.value={title:"",pid:"0"}},Y=()=>o(this,null,(function*(){let e;switch(L.value){case"create":e=yield r(E.value);break;case"update":e=yield d(E.value);break;default:e=yield r(E.value)}0===e.code&&(x({type:"success",message:"创建/更改成功"}),X(),K())}));return(e,a)=>{const l=v("el-button"),t=v("el-table-column"),i=v("el-table"),o=v("el-pagination"),n=v("el-input"),u=v("el-form-item"),s=v("el-form"),r=v("el-dialog");return m(),g("div",null,[f("div",z,[f("div",k,[y(l,{size:"small",type:"primary",icon:"plus",onClick:W},{default:h((()=>[_])),_:1})]),y(i,{data:U.value,"row-key":"ID"},{default:h((()=>[y(t,{align:"left",label:"ID",width:"100",prop:"ID"}),y(t,{align:"left",label:"日期",width:"180"},{default:h((e=>[b(j(w(c)(e.row.CreatedAt)),1)])),_:1}),y(t,{align:"left",label:"分类名称",prop:"title",width:"120"}),y(t,{align:"left",label:"按钮组"},{default:h((e=>[y(l,{size:"small",type:"text",icon:"edit",onClick:a=>M(e.row.ID)},{default:h((()=>[D])),_:2},1032,["onClick"]),y(l,{size:"small",type:"text",icon:"delete",onClick:a=>N(e.row.ID)},{default:h((()=>[I])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),f("div",O,[y(o,{layout:"total, sizes, prev, pager, next, jumper","current-page":A.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:B.value,onCurrentChange:J,onSizeChange:H},null,8,["current-page","page-size","total"])])]),y(r,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),"before-close":X,title:F.value},{footer:h((()=>[f("div",V,[y(l,{size:"small",onClick:X},{default:h((()=>[P])),_:1}),y(l,{size:"small",type:"primary",onClick:Y},{default:h((()=>[S])),_:1})])])),default:h((()=>[y(s,{model:E.value,"label-position":"right","label-width":"80px"},{default:h((()=>[y(u,{label:"分类名称:"},{default:h((()=>[y(n,{modelValue:E.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.title=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}});export{A as default};
