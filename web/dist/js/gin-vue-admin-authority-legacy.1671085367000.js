/*! 
 Build based on gin-vue-admin 
 Time : 1671085367000 */
!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t,a,n,r,u,i){try{var l=e[u](i),o=l.value}catch(c){return void a(c)}l.done?t(o):Promise.resolve(o).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,u){var i=e.apply(t,a);function l(e){n(i,r,u,l,o,"next",e)}function o(e){n(i,r,u,l,o,"throw",e)}l(void 0)}))}}var u=document.createElement("style");u.innerHTML=".authority .el-input-number{margin-left:15px}.authority .el-input-number span{display:none}.role-box .el-tabs__content{height:calc(100vh - 72px);overflow:auto}\n",document.head.appendChild(u),System.register(["./gin-vue-admin-authority-legacy.16710853670002.js","./gin-vue-admin-menus-legacy.1671085367000.js","./gin-vue-admin-apis-legacy.1671085367000.js","./gin-vue-admin-datas-legacy.1671085367000.js","./gin-vue-admin-warningBar-legacy.1671085367000.js","./gin-vue-admin-vendor-legacy.1671085367000.js","../gva/gin-vue-admin-index-legacy.1671085367000.js","./gin-vue-admin-authorityBtn-legacy.1671085367000.js","./gin-vue-admin-api-legacy.16710853670002.js"],(function(e){"use strict";var a,n,u,i,l,o,c,d,s,f,v,y,h,p,m,g,b,I,w,k,x;return{setters:[function(e){a=e.g,n=e.d,u=e.c,i=e.u,l=e.a},function(e){o=e.default},function(e){c=e.default},function(e){d=e.default},function(e){s=e.w},function(e){f=e.r,v=e.i,y=e.o,h=e.j,p=e.k,m=e.q,g=e.t,b=e.H,I=e.v,w=e.A,k=e.e,x=e.d},function(){},function(){},function(){}],execute:function(){var _={class:"authority"},j={class:"gva-table-box"},C={class:"gva-btn-list"},O=w("新增角色"),N=w("设置权限"),V=w("新增子角色"),P=w("拷贝"),z=w("编辑"),R=w("删除"),A={class:"dialog-footer"},D=w("取 消"),S=w("确 定"),E={name:"Authority"};e("default",Object.assign(E,{setup:function(e){var w=f([{authorityId:"0",authorityName:"根角色"}]),E=f(!1),U=f("add"),q=f({}),B=f("新增角色"),T=f(!1),F=f(!1),H=f({}),L=f({authorityId:"",authorityName:"",parentId:"0"}),M=f({authorityId:[{required:!0,message:"请输入角色ID",trigger:"blur"},{validator:function(e,t,a){return/^[0-9]*[1-9][0-9]*$/.test(t)?a():a(new Error("请输入正整数"))},trigger:"blur"}],authorityName:[{required:!0,message:"请输入角色名",trigger:"blur"}],parentId:[{required:!0,message:"请选择请求方式",trigger:"blur"}]}),$=f(1),G=f(0),J=f(999),K=f([]),Q=f({}),W=function(){var e=r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t({page:$.value,pageSize:J.value},Q.value));case 2:0===(n=e.sent).code&&(K.value=n.data.list,G.value=n.data.total,$.value=n.data.page,J.value=n.data.pageSize);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();W();var X=function(e,t){q.value[e]=t},Y=f(null),Z=f(null),ee=f(null),te=function(e,t){var a=[Y,Z,ee];t&&a[t].value.needConfirm&&(a[t].value.enterAndNext(),a[t].value.needConfirm=!1)},ae=f(null),ne=function(){ae.value&&ae.value.resetFields(),L.value={authorityId:"",authorityName:"",parentId:"0"}},re=function(){ne(),T.value=!1,F.value=!1},ue=function(){if("0"===L.value.authorityId)return x({type:"error",message:"角色id不能为0"}),!1;ae.value.validate(function(){var e=r(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=26;break}e.t0=U.value,e.next="add"===e.t0?4:"edit"===e.t0?9:"copy"===e.t0?14:24;break;case 4:return e.next=6,l(L.value);case 6:return 0===e.sent.code&&(x({type:"success",message:"添加成功!"}),W(),re()),e.abrupt("break",24);case 9:return e.next=11,i(L.value);case 11:return 0===e.sent.code&&(x({type:"success",message:"添加成功!"}),W(),re()),e.abrupt("break",24);case 14:return(a={authority:{authorityId:"string",authorityName:"string",datauthorityId:[],parentId:"string"},oldAuthorityId:0}).authority.authorityId=L.value.authorityId,a.authority.authorityName=L.value.authorityName,a.authority.parentId=L.value.parentId,a.authority.dataAuthorityId=H.value.dataAuthorityId,a.oldAuthorityId=H.value.authorityId,e.next=22,u(a);case 22:0===e.sent.code&&(x({type:"success",message:"复制成功！"}),W());case 24:ne(),T.value=!1;case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},ie=function(){w.value=[{authorityId:"0",authorityName:"根角色"}],le(K.value,w.value,!1)},le=function e(t,a,n){L.value.authorityId=String(L.value.authorityId),t&&t.forEach((function(t){if(t.children&&t.children.length){var r={authorityId:t.authorityId,authorityName:t.authorityName,disabled:n||t.authorityId===L.value.authorityId,children:[]};e(t.children,r.children,n||t.authorityId===L.value.authorityId),a.push(r)}else{var u={authorityId:t.authorityId,authorityName:t.authorityName,disabled:n||t.authorityId===L.value.authorityId};a.push(u)}}))},oe=function(e){ne(),B.value="新增角色",U.value="add",L.value.parentId=e,ie(),T.value=!0};return function(e,t){var a=v("el-button"),u=v("el-table-column"),i=v("el-table"),l=v("el-cascader"),f=v("el-form-item"),F=v("el-input"),G=v("el-form"),J=v("el-dialog"),Q=v("el-tab-pane"),ne=v("el-tabs"),le=v("el-drawer");return y(),h("div",_,[p(s,{title:"注：右上角头像下拉可切换角色"}),m("div",j,[m("div",C,[p(a,{size:"small",type:"primary",icon:"plus",onClick:t[0]||(t[0]=function(e){return oe("0")})},{default:g((function(){return[O]})),_:1})]),p(i,{data:K.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:g((function(){return[p(u,{label:"角色ID","min-width":"180",prop:"authorityId"}),p(u,{align:"left",label:"角色名称","min-width":"180",prop:"authorityName"}),p(u,{align:"left",label:"操作",width:"460"},{default:g((function(e){return[p(a,{icon:"setting",size:"small",type:"text",onClick:function(t){return a=e.row,E.value=!0,void(q.value=a);var a}},{default:g((function(){return[N]})),_:2},1032,["onClick"]),p(a,{icon:"plus",size:"small",type:"text",onClick:function(t){return oe(e.row.authorityId)}},{default:g((function(){return[V]})),_:2},1032,["onClick"]),p(a,{icon:"copy-document",size:"small",type:"text",onClick:function(t){return function(e){for(var t in ie(),B.value="拷贝角色",U.value="copy",L.value)L.value[t]=e[t];H.value=e,T.value=!0}(e.row)}},{default:g((function(){return[P]})),_:2},1032,["onClick"]),p(a,{icon:"edit",size:"small",type:"text",onClick:function(t){return function(e){for(var t in ie(),B.value="编辑角色",U.value="edit",L.value)L.value[t]=e[t];ie(),T.value=!0}(e.row)}},{default:g((function(){return[z]})),_:2},1032,["onClick"]),p(a,{icon:"delete",size:"small",type:"text",onClick:function(t){return a=e.row,void k.confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({authorityId:a.authorityId});case 2:0===e.sent.code&&(x({type:"success",message:"删除成功!"}),1===K.value.length&&$.value>1&&$.value--,W());case 4:case"end":return e.stop()}}),e)})))).catch((function(){x({type:"info",message:"已取消删除"})}));var a}},{default:g((function(){return[R]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]),p(J,{modelValue:T.value,"onUpdate:modelValue":t[4]||(t[4]=function(e){return T.value=e}),title:B.value},{footer:g((function(){return[m("div",A,[p(a,{size:"small",onClick:re},{default:g((function(){return[D]})),_:1}),p(a,{size:"small",type:"primary",onClick:ue},{default:g((function(){return[S]})),_:1})])]})),default:g((function(){return[p(G,{ref_key:"authorityForm",ref:ae,model:L.value,rules:M.value,"label-width":"80px"},{default:g((function(){return[p(f,{label:"父级角色",prop:"parentId"},{default:g((function(){return[p(l,{modelValue:L.value.parentId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L.value.parentId=e}),style:{width:"100%"},disabled:"add"==U.value,options:w.value,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])]})),_:1}),p(f,{label:"角色ID",prop:"authorityId"},{default:g((function(){return[p(F,{modelValue:L.value.authorityId,"onUpdate:modelValue":t[2]||(t[2]=function(e){return L.value.authorityId=e}),disabled:"edit"==U.value,autocomplete:"off"},null,8,["modelValue","disabled"])]})),_:1}),p(f,{label:"角色姓名",prop:"authorityName"},{default:g((function(){return[p(F,{modelValue:L.value.authorityName,"onUpdate:modelValue":t[3]||(t[3]=function(e){return L.value.authorityName=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"]),E.value?(y(),b(le,{key:0,modelValue:E.value,"onUpdate:modelValue":t[5]||(t[5]=function(e){return E.value=e}),"with-header":!1,size:"40%",title:"角色配置"},{default:g((function(){return[p(ne,{"before-leave":te,class:"role-box",type:"border-card"},{default:g((function(){return[p(Q,{label:"角色菜单"},{default:g((function(){return[p(o,{ref_key:"menus",ref:Y,row:q.value,onChangeRow:X},null,8,["row"])]})),_:1}),p(Q,{label:"角色api"},{default:g((function(){return[p(c,{ref_key:"apis",ref:Z,row:q.value,onChangeRow:X},null,8,["row"])]})),_:1}),p(Q,{label:"资源权限"},{default:g((function(){return[p(d,{ref_key:"datas",ref:ee,authority:K.value,row:q.value,onChangeRow:X},null,8,["authority","row"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])):I("",!0)])}}}))}}}))}();
